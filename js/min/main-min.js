$(function(){function e(){var e={lat:40.6357511,lng:-73.9596188};r=new google.maps.Map(document.getElementById("map"),{center:e,zoom:12,styles:l.silver}),a=new google.maps.InfoWindow;var o=new google.maps.places.PlacesService(r);navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var l={lat:e.coords.latitude,lng:e.coords.longitude};console.log("lat:"+l.lat+" lng:"+l.lng),s.forEach(function(e){o.textSearch({location:l,radius:1500,query:e},t)});var a=new google.maps.Marker({map:r,position:l,animation:google.maps.Animation.BOUNCE,icon:"img/person.svg"});setTimeout(function(){a.setAnimation(null),console.log("stop bouncing dammit!")},2200),r.setCenter(l)},function(){handleLocationError(!0,marker,r.getCenter())}):handleLocationError(!1,marker,r.getCenter())}function t(e,t){if(t===google.maps.places.PlacesServiceStatus.OK)for(var l=0;l<e.length;l++)o(e[l]),console.log(e[l])}function o(e){var t=e.geometry.location,o=new google.maps.Marker({map:r,position:e.geometry.location,animation:google.maps.Animation.DROP,icon:"img/marker.svg"});google.maps.event.addListener(o,"click",function(){a.setContent(e.name),a.open(r,this)})}var l={default:null,silver:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},r,a,n,s=["Dough Doughnuts Bedford-Stuyvesant","Underwest Hell's Kitchen","Peter Pan Donut & Pastry Shop Greenpoint","Doughnut Plant Lower East Side","Dominique Ansel Bakery Soho"];e()});